"use strict";(self.webpackChunktraining_app=self.webpackChunktraining_app||[]).push([[609],{2609:(L,v,s)=>{s.r(v),s.d(v,{amplify_amazon_button:()=>b,amplify_auth0_button:()=>O,amplify_facebook_button:()=>D,amplify_google_button:()=>C,amplify_oauth_button:()=>W});var I=s(8239),o=s(4600),y=s(1735),p=s(6845),A=s(4052),n=s(4932),m=s(6289),g=s(4102),S=s(9571);const E=new y.k("amplify-amazon-button"),b=class{constructor(t){var r=this;(0,o.r)(this,t),this.handleAuthStateChange=S.d,this.federatedSignIn=i=>{const{access_token:e,expires_in:l}=i;if(!e)return;if(!n.g||"function"!=typeof n.g.federatedSignIn||"function"!=typeof n.g.currentAuthenticatedUser)throw new Error(g.N);const u=1e3*l+(new Date).getTime();window.amazon.Login.retrieveProfile(function(){var c=(0,I.Z)(function*(a){if(!a.success)return E.debug("Get user Info failed");const d={name:a.profile.Name,email:a.profile.PrimaryEmail};yield n.g.federatedSignIn("amazon",{token:e,expires_at:u},d);const _=yield n.g.currentAuthenticatedUser();r.handleAuthStateChange(A.A.SignedIn,_)});return function(a){return c.apply(this,arguments)}}())}}signInWithAmazon(t){t.preventDefault(),window.amazon.Login.setClientId(this.clientId),window.amazon.Login.authorize({scope:"profile"},r=>{if(r.error)return E.debug("Failed to login with amazon: "+r.error);try{window.localStorage.setItem(g.h,JSON.stringify({provider:"amazon"}))}catch(i){E.debug("Failed to cache auth source into localStorage",i)}this.federatedSignIn(r)})}render(){return(0,o.h)("amplify-sign-in-button",{onClick:t=>this.signInWithAmazon(t),provider:"amazon"},(0,o.h)("script",{src:"https://assets.loginwithamazon.com/sdk/na/login1.js"}),p.o.get(m.T.SIGN_IN_WITH_AMAZON))}},f=new y.k("amplify-auth0-button"),O=class{constructor(t){var r=this;(0,o.r)(this,t),this.handleAuthStateChange=S.d,this.handleLoad=()=>{const{oauth:i={}}=n.g.configure(),{config:e=i.auth0}=this;e?(f.debug("auth0 configuration",e),this._auth0||(this._auth0=new window.auth0.WebAuth(e)),this._auth0.parseHash((l,h)=>{if(l)return void f.debug("Failed to parse the url for Auth0",l);if(!h)return void f.debug("Auth0 found no authResult in hash");const u={provider:"auth0",opts:{returnTo:e.returnTo,clientID:e.clientID,federated:e.federated}};try{localStorage.setItem(g.h,JSON.stringify(u))}catch(c){f.debug("Failed to cache auth source into localStorage",c)}this._auth0.client.userInfo(h.accessToken,function(){var c=(0,I.Z)(function*(a,d){let _,w;a?f.debug("Failed to get the user info",a):(_=d.name,w=d.email),yield n.g.federatedSignIn(e.domain,{token:h.idToken,expires_at:1e3*h.expiresIn+(new Date).getTime()},{name:_,email:w});const U=yield n.g.currentAuthenticatedUser();r.handleAuthStateChange(A.A.SignedIn,U)});return function(a,d){return c.apply(this,arguments)}}())})):f.debug("Auth0 is not configured")}}signInWithAuth0(t){if(t.preventDefault(),!this._auth0)throw new Error("the auth0 client is not configured");this._auth0.authorize()}render(){return(0,o.h)("amplify-sign-in-button",{onClick:t=>this.signInWithAuth0(t),provider:"auth0"},(0,o.h)("script",{onLoad:this.handleLoad,src:"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"}),p.o.get(m.T.SIGN_IN_WITH_AUTH0))}},T=new y.k("amplify-facebook-button"),D=class{constructor(t){var r=this;(0,o.r)(this,t),this.handleAuthStateChange=S.d,this.federatedSignIn=i=>{const{accessToken:e,expiresIn:l}=i;if(!e)return;if(!n.g||"function"!=typeof n.g.federatedSignIn||"function"!=typeof n.g.currentAuthenticatedUser)throw new Error(g.N);const u=1e3*l+(new Date).getTime();window.FB.api("/me",{fields:"name,email"},function(){var a=(0,I.Z)(function*(d){const _={name:d.name,email:d.email};yield n.g.federatedSignIn("facebook",{token:e,expires_at:u},_);const w=yield n.g.currentAuthenticatedUser();r.handleAuthStateChange(A.A.SignedIn,w)});return function(d){return a.apply(this,arguments)}}())},this.getLoginStatus=()=>{window.FB.getLoginStatus(i=>{try{window.localStorage.setItem(g.h,JSON.stringify({provider:"facebook"}))}catch(e){T.debug("Failed to cache auth source into localStorage",e)}if("connected"===i.status)return this.federatedSignIn(i.authResponse);this.login()})},this.login=()=>{window.FB.login(e=>{e&&e.authResponse&&this.federatedSignIn(e.authResponse)},{scope:"public_profile,email"})}}signInWithFacebook(t){t.preventDefault(),window.FB.init({appId:this.appId,cookie:!0,xfbml:!1,version:"v5.0"}),this.getLoginStatus()}render(){return(0,o.h)("amplify-sign-in-button",{onClick:t=>this.signInWithFacebook(t),provider:"facebook"},(0,o.h)("script",{async:!0,defer:!0,src:"https://connect.facebook.net/en_US/sdk.js"}),p.o.get(m.T.SIGN_IN_WITH_FACEBOOK))}},k=new y.k("amplify-google-button"),C=class{constructor(t){var r=this;(0,o.r)(this,t),this.handleAuthStateChange=S.d,this.handleError=i=>{console.error(i)},this.handleLoad=()=>{window.gapi.load("auth2")},this.handleUser=function(){var i=(0,I.Z)(function*(e){if(!n.g||"function"!=typeof n.g.federatedSignIn||"function"!=typeof n.g.currentAuthenticatedUser)throw new Error(g.N);try{window.localStorage.setItem(g.h,JSON.stringify({provider:"google"}))}catch(a){k.debug("Failed to cache auth source into localStorage",a)}const{id_token:l,expires_at:h}=e.getAuthResponse(),u=e.getBasicProfile();yield n.g.federatedSignIn("google",{token:l,expires_at:h},{email:u.getEmail(),name:u.getName(),picture:u.getImageUrl()});const c=yield n.g.currentAuthenticatedUser();try{r.handleAuthStateChange(A.A.SignedIn,c)}catch(a){r.handleError(a)}});return function(e){return i.apply(this,arguments)}}()}getAuthInstance(){return window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance()||window.gapi.auth2.init({client_id:this.clientId,cookiepolicy:"single_host_origin",scope:"profile email openid"}):null}signInWithGoogle(t){t.preventDefault(),this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError)}render(){return(0,o.h)("amplify-sign-in-button",{onClick:t=>this.signInWithGoogle(t),provider:"google"},(0,o.h)("script",{onLoad:this.handleLoad,src:"https://apis.google.com/js/api:client.js"}),p.o.get(m.T.SIGN_IN_WITH_GOOGLE))}},W=class{constructor(t){(0,o.r)(this,t),this.config={}}signInWithOAuth(t){t.preventDefault(),n.g.federatedSignIn()}render(){return(0,o.h)("amplify-sign-in-button",{onClick:t=>this.signInWithOAuth(t),provider:"oauth"},this.config.label||p.o.get(m.T.SIGN_IN_WITH_AWS))}}}}]);