"use strict";(self.webpackChunktraining_app=self.webpackChunktraining_app||[]).push([[856],{5856:(S,r,t)=>{t.r(r),t.d(r,{amplify_select_mfa_type:()=>A});var d=t(8239),i=t(4600),f=t(1735),l=t(6845),T=t(4052),_=t(4932),n=t(6289),u=t(4102);const o=new f.k("SelectMFAType"),A=class{constructor(a){(0,i.r)(this,a),this.handleSubmit=e=>this.verify(e),this.TOTPSetup=!1,this.selectMessage=null,this.MFAMethod=null,this.isTOTP=!1,this.isNoMFA=!1,this.isSMS=!1,this.loading=!1,this.isToastVisible=!1}handleRadioButtonChange(a){this.TOTPSetup=!1,this.selectMessage=null,this.isNoMFA=!1,this.isTOTP=!1,this.isSMS=!1,this.isToastVisible=!1;const{value:e,type:M,checked:s}=a.target,h=["radio","checkbox"].includes(M);e===T.M.SMS&&h&&(this.isSMS=s),e===T.M.TOTP&&h&&(this.isTOTP=s),e===T.M.NOMFA&&h&&(this.isNoMFA=s)}verify(a){var e=this;return(0,d.Z)(function*(){a&&a.preventDefault(),o.debug("MFA Type Values",{TOTP:e.isTOTP,SMS:e.isSMS,"No MFA":e.isNoMFA}),e.isTOTP?e.MFAMethod=T.M.TOTP:e.isSMS?e.MFAMethod=T.M.SMS:e.isNoMFA&&(e.MFAMethod=T.M.NOMFA);const M=e.authData;if(!_.g||"function"!=typeof _.g.setPreferredMFA)throw new Error(u.N);e.loading=!0;try{const s=yield _.g.setPreferredMFA(M,e.MFAMethod);o.debug("Set Preferred MFA Succeeded",s),e.selectMessage=`${l.o.get(n.T.SUCCESS_MFA_TYPE)} ${e.MFAMethod}`}catch(s){const{message:h}=s;h===u.e||h===u.f?(e.TOTPSetup=!0,e.selectMessage=l.o.get(n.T.SETUP_TOTP_REQUIRED)):(o.debug("Set Preferred MFA failed",s),e.selectMessage=l.o.get(n.T.UNABLE_TO_SETUP_MFA_AT_THIS_TIME))}finally{e.loading=!1,e.isToastVisible=!0}})()}contentBuilder(){if(!this.MFATypes||Object.keys(this.MFATypes).length<2)return o.debug(l.o.get(n.T.LESS_THAN_TWO_MFA_VALUES_MESSAGE)),(0,i.h)("div",null,(0,i.h)("a",null,l.o.get(n.T.LESS_THAN_TWO_MFA_VALUES_MESSAGE)));const{SMS:a,TOTP:e,Optional:M}=this.MFATypes;return(0,i.h)("amplify-form-section",{submitButtonText:l.o.get(n.T.SELECT_MFA_TYPE_SUBMIT_BUTTON_TEXT),headerText:l.o.get(n.T.SELECT_MFA_TYPE_HEADER_TEXT),handleSubmit:s=>this.handleSubmit(s),loading:this.loading},a?(0,i.h)("amplify-radio-button",{key:"sms",name:"MFAType",value:"SMS",label:"SMS",handleInputChange:s=>this.handleRadioButtonChange(s)}):null,e?(0,i.h)("amplify-radio-button",{key:"totp",name:"MFAType",value:"TOTP",label:"TOTP",handleInputChange:s=>this.handleRadioButtonChange(s)}):null,M?(0,i.h)("amplify-radio-button",{key:"noMFA",name:"MFAType",value:"NOMFA",label:"No MFA",handleInputChange:s=>this.handleRadioButtonChange(s)}):null)}renderToast(){return this.isToastVisible&&this.selectMessage?(0,i.h)("amplify-toast",{message:this.selectMessage,handleClose:()=>{this.selectMessage=null,this.isToastVisible=!1}}):null}render(){return(0,i.h)("div",null,this.contentBuilder(),this.TOTPSetup?(0,i.h)("amplify-totp-setup",{user:this.authData}):null,this.renderToast())}}}}]);