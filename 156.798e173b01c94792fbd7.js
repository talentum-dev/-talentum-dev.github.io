"use strict";(self.webpackChunktraining_app=self.webpackChunktraining_app||[]).push([[156],{9156:(v,g,i)=>{i.r(g),i.d(g,{amplify_authenticator:()=>d});var l=i(8239),e=i(4600),f=i(1735),h=i(2455),t=i(4052),m=i(1483),c=i(4932),r=(i(6289),i(4102)),o=i(9571),_=i(6036);const A={[t.A.SignIn]:"sign-in",[t.A.ConfirmSignIn]:"confirm-sign-in",[t.A.SignUp]:"sign-up",[t.A.ConfirmSignUp]:"confirm-sign-up",[t.A.ForgotPassword]:"forgot-password",[t.A.ResetPassword]:"require-new-password",[t.A.VerifyContact]:"verify-contact",[t.A.TOTPSetup]:"totp-setup",[t.A.Loading]:"loading"},u=new f.k("Authenticator"),d=class{constructor(a){(0,e.r)(this,a),this.initialAuthState=t.A.SignIn,this.handleAuthStateChange=()=>{},this.hideToast=!1,this.authState=t.A.Loading,this.toastMessage="",this.handleExternalAuthEvent=({payload:s})=>{switch(s.event){case"cognitoHostedUI":case"signIn":(0,_.c)(s.data,o.d);break;case"cognitoHostedUI_failure":case"parsingUrl_failure":case"signOut":case"customGreetingSignOut":return(0,o.d)(this.initialAuthState)}},this.handleToastEvent=({payload:s})=>{switch(s.event){case r.T:s.message&&(this.toastMessage=s.message)}}}componentWillLoad(){var a=this;return(0,l.Z)(function*(){(0,o.o)((s,n)=>{a.onAuthStateChange(s,n),a.toastMessage=""}),a.hideToast||h.Xb.listen(r.U,a.handleToastEvent),h.Xb.listen(r.A,a.handleExternalAuthEvent),(0,m.Ib)("amplify-authenticator"),yield a.checkUser()})()}checkUser(){var a=this;return(0,l.Z)(function*(){if(!c.g||"function"!=typeof c.g.currentAuthenticatedUser)throw new Error(r.N);return c.g.currentAuthenticatedUser().then(s=>{(0,o.d)(t.A.SignedIn,s)}).catch(()=>{(0,o.d)(a.initialAuthState)})})()}onAuthStateChange(a,s){var n=this;return(0,l.Z)(function*(){if(void 0===a)return u.error("nextAuthState cannot be undefined");u.info("Inside onAuthStateChange Method current authState:",n.authState),n.authState=a===t.A.SignedOut?n.initialAuthState:a,n.authData=s,n.authData&&u.log("Auth Data was set:",n.authData),n.authState===a&&(n.handleAuthStateChange(n.authState,n.authData),u.info(`authState has been updated to ${n.authState}`))})()}getAuthComponent(a){switch(a){case t.A.SignIn:return(0,e.h)("amplify-sign-in",{federated:this.federated,usernameAlias:this.usernameAlias});case t.A.ConfirmSignIn:return(0,e.h)("amplify-confirm-sign-in",{user:this.authData});case t.A.SignUp:return(0,e.h)("amplify-sign-up",{usernameAlias:this.usernameAlias});case t.A.ConfirmSignUp:return(0,e.h)("amplify-confirm-sign-up",{user:this.authData,usernameAlias:this.usernameAlias});case t.A.ForgotPassword:return(0,e.h)("amplify-forgot-password",{usernameAlias:this.usernameAlias});case t.A.ResetPassword:return(0,e.h)("amplify-require-new-password",{user:this.authData});case t.A.VerifyContact:return(0,e.h)("amplify-verify-contact",{user:this.authData});case t.A.TOTPSetup:return(0,e.h)("amplify-totp-setup",{user:this.authData});case t.A.Loading:return(0,e.h)("div",null,"Loading...");default:throw new Error(`Unhandled auth state: ${a}`)}}getSlotWithAuthComponent(a){const s=this.getAuthComponent(a),n=A[a],E=null===this.el.querySelector(`[slot="${n}"]`);return(0,e.h)("slot",{name:n},E&&s)}disconnectedCallback(){return h.Xb.remove(r.A,this.handleExternalAuthEvent),this.hideToast||h.Xb.remove(r.U,this.handleToastEvent),o.o}render(){return(0,e.h)(e.H,null,!this.hideToast&&this.toastMessage&&(0,e.h)("amplify-toast",{message:this.toastMessage,handleClose:()=>{this.toastMessage=""},"data-test":"authenticator-error"}),this.authState===t.A.SignedIn?[(0,e.h)("slot",{name:"greetings"}),(0,e.h)("slot",null)]:(0,e.h)("div",{class:"auth-container"},this.getSlotWithAuthComponent(this.authState)))}get el(){return(0,e.g)(this)}};d.style=":host{--background-color:var(--amplify-background-color);--width:28.75rem;--min-width:20rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;--box-shadow:1px 1px 4px 0 rgba(0, 0, 0, 0.15);--border-radius:6px;--padding:35px 40px;--margin-bottom:20px;--container-height:100vh;--container-display:flex;--container-justify:center;--container-align:center}.auth-container{display:var(--container-display);-ms-flex-pack:var(--container-justify);justify-content:var(--container-justify);-ms-flex-align:var(--container-align);align-items:var(--container-align);min-height:var(--container-height)}"}}]);