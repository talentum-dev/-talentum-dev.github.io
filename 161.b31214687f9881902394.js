"use strict";(self.webpackChunktraining_app=self.webpackChunktraining_app||[]).push([[161],{161:(rr,ce,C)=>{C.r(ce),C.d(ce,{amplify_radio_button:()=>me,amplify_toast:()=>ye,amplify_totp_setup:()=>Ue});var H=C(8239),w=C(4600),Fe=C(1735),M=C(6845),ve=C(4052),U=C(4932),S=C(6289),pe=C(4102),G=C(9571),Oe=C(6036),ke=C(3875);const me=class{constructor(n){(0,w.r)(this,n),this.placeholder="",this.checked=!1,this.disabled=!1}render(){return(0,w.h)("span",{class:"radio-button"},(0,w.h)("input",Object.assign({type:"radio",name:this.name,value:this.value,onInput:this.handleInputChange,placeholder:this.placeholder,id:this.fieldId,checked:this.checked,disabled:this.disabled},this.inputProps)),(0,w.h)("amplify-label",{htmlFor:this.fieldId},this.label))}};me.style=":host{--font-family:var(--amplify-font-family)}.radio-button{display:block;width:100%;padding:16px;font-size:var(--amplify-text-sm);font-family:var(--font-family)}.radio-button input{margin-right:12px}";const ye=class{constructor(n){(0,w.r)(this,n),this.message=""}render(){return(0,w.h)("div",{class:"toast"},(0,w.h)("amplify-icon",{class:"toast-icon",name:"warning"}),this.message?(0,w.h)("span",null,this.message):null,(0,w.h)("slot",null),(0,w.h)("button",{class:"toast-close",onClick:this.handleClose}))}};ye.style=':host{--background-color:var(--amplify-secondary-tint);--color:var(--amplify-white);--font-size:var(--amplify-text-sm);--font-family:var(--amplify-font-family);--close-icon-color:var(--amplify-white);--close-icon-hover:var(--amplify-red)}.toast-icon{padding-right:5px}.toast{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;position:absolute;top:0;left:0;width:100%;z-index:99;-webkit-box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);padding:16px;background-color:var(--background-color);font-size:var(--font-size);color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:5px;font-family:var(--font-family)}.toast>span{margin-right:10px}.toast-close{margin-left:auto;-ms-flex-item-align:center;align-self:center;position:relative;width:18px;height:18px;overflow:hidden;cursor:pointer;background:transparent;border:none}.toast-close::before,.toast-close::after{content:"";position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:var(--close-icon-color)}.toast-close:hover::before,.toast-close:hover::after{background:var(--close-icon-hover)}.toast-close::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.toast-close::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}';var Ye=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},ze={}.toString,te=Array.isArray||function(n){return"[object Array]"==ze.call(n)},Ee=(p.TYPED_ARRAY_SUPPORT=function(){try{var n=new Uint8Array(1);return n.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===n.foo()}catch(e){return!1}}())?2147483647:1073741823;function p(n,e,t){return p.TYPED_ARRAY_SUPPORT||this instanceof p?"number"==typeof n?we(this,n):function(n,e,t,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(n,e,t,i){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(i||0))throw new RangeError("'length' is out of bounds");var r;return r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),p.TYPED_ARRAY_SUPPORT?r.__proto__=p.prototype:r=ne(n,r),r}(n,e,t,i):"string"==typeof e?function(n,e){var t=0|_e(e),i=k(n,t),r=i.write(e);return r!==t&&(i=i.slice(0,r)),i}(n,e):function(n,e){if(p.isBuffer(e)){var t=0|re(e.length),i=k(n,t);return 0===i.length||e.copy(i,0,0,t),i}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(n){return n!=n}(e.length)?k(n,0):ne(n,e);if("Buffer"===e.type&&Array.isArray(e.data))return ne(n,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(n,e)}(this,n,e,t):new p(n,e,t)}function re(n){if(n>=Ee)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ee.toString(16)+" bytes");return 0|n}function k(n,e){var t;return p.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=p.prototype:(null===(t=n)&&(t=new p(e)),t.length=e),t}function we(n,e){var t=k(n,e<0?0:0|re(e));if(!p.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function ne(n,e){for(var t=e.length<0?0:0|re(e.length),i=k(n,t),r=0;r<t;r+=1)i[r]=255&e[r];return i}function Te(n,e){e=e||1/0;for(var t,i=n.length,r=null,o=[],a=0;a<i;++a){if((t=n.charCodeAt(a))>55295&&t<57344){if(!r){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),r=t;continue}t=65536+(r-55296<<10|t-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function _e(n){return p.isBuffer(n)?n.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(n)||n instanceof ArrayBuffer)?n.byteLength:("string"!=typeof n&&(n=""+n),0===n.length?0:Te(n).length)}p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),p.prototype.write=function(e,t,i){void 0===t||void 0===i&&"string"==typeof t?(i=this.length,t=0):isFinite(t)&&(t|=0,isFinite(i)?i|=0:i=void 0);var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(n,e,t,i){return function(n,e,t,i){for(var r=0;r<i&&!(r+t>=e.length||r>=n.length);++r)e[r+t]=n[r];return r}(Te(e,n.length-t),n,t,i)}(this,e,t,i)},p.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),p.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=p.prototype;else{var o=t-e;r=new p(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},p.prototype.copy=function(e,t,i,r){if(i||(i=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var a,o=r-i;if(this===e&&i<t&&t<r)for(a=o-1;a>=0;--a)e[a+t]=this[a+i];else if(o<1e3||!p.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},p.prototype.fill=function(e,t,i){if("string"==typeof e){if("string"==typeof t?(t=0,i=this.length):"string"==typeof i&&(i=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var o;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(o=t;o<i;++o)this[o]=e;else{var a=p.isBuffer(e)?e:new p(e),f=a.length;for(o=0;o<i-t;++o)this[o+t]=a[o%f]}return this},p.concat=function(e,t){if(!te(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return k(null,0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var r=we(null,t),o=0;for(i=0;i<e.length;++i){var a=e[i];if(!p.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},p.byteLength=_e,p.prototype._isBuffer=!0,p.isBuffer=function(e){return!(null==e||!e._isBuffer)};var ie,A_alloc=function(n){var e=new p(n);return e.fill(0),e},A_from=function(n){return new p(n)},je=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],E_getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},E_getSymbolTotalCodewords=function(e){return je[e]},E_getBCHDigit=function(n){for(var e=0;0!==n;)e++,n>>>=1;return e},E_isKanjiModeEnabled=function(){return void 0!==ie},E_toSJIS=function(e){return ie(e)};function I(n,e,t){return n(t={path:e,exports:{},require:function(i,r){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},t.exports),t.exports}var B=I(function(n,e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(r){return r&&void 0!==r.bit&&r.bit>=0&&r.bit<4},e.from=function(r,o){if(e.isValid(r))return r;try{return function(i){if("string"!=typeof i)throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+i)}}(r)}catch(a){return o}}});function Ce(){this.buffer=[],this.length=0}Ce.prototype={get:function(n){var e=Math.floor(n/8);return 1==(this.buffer[e]>>>7-n%8&1)},put:function(n,e){for(var t=0;t<e;t++)this.putBit(1==(n>>>e-t-1&1))},getLengthInBits:function(){return this.length},putBit:function(n){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ut=Ce;function J(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=A_alloc(n*n),this.reservedBit=A_alloc(n*n)}J.prototype.set=function(n,e,t,i){var r=n*this.size+e;this.data[r]=t,i&&(this.reservedBit[r]=!0)},J.prototype.get=function(n,e){return this.data[n*this.size+e]},J.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t},J.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var ft=J,st=I(function(n,e){var t=E_getSymbolSize;e.getRowColCoords=function(r){if(1===r)return[];for(var o=Math.floor(r/7)+2,a=t(r),f=145===a?26:2*Math.ceil((a-13)/(2*o-2)),u=[a-7],l=1;l<o-1;l++)u[l]=u[l-1]-f;return u.push(6),u.reverse()},e.getPositions=function(r){for(var o=[],a=e.getRowColCoords(r),f=a.length,u=0;u<f;u++)for(var l=0;l<f;l++)0===u&&0===l||0===u&&l===f-1||u===f-1&&0===l||o.push([a[u],a[l]]);return o}}),lt=E_getSymbolSize,oe=I(function(n,e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function i(r,o,a){switch(r){case e.Patterns.PATTERN000:return(o+a)%2==0;case e.Patterns.PATTERN001:return o%2==0;case e.Patterns.PATTERN010:return a%3==0;case e.Patterns.PATTERN011:return(o+a)%3==0;case e.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2==0;case e.Patterns.PATTERN101:return o*a%2+o*a%3==0;case e.Patterns.PATTERN110:return(o*a%2+o*a%3)%2==0;case e.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2==0;default:throw new Error("bad maskPattern:"+r)}}e.isValid=function(o){return null!=o&&""!==o&&!isNaN(o)&&o>=0&&o<=7},e.from=function(o){return e.isValid(o)?parseInt(o,10):void 0},e.getPenaltyN1=function(o){for(var a=o.size,f=0,u=0,l=0,s=null,h=null,d=0;d<a;d++){u=l=0,s=h=null;for(var g=0;g<a;g++){var v=o.get(d,g);v===s?u++:(u>=5&&(f+=u-5+3),s=v,u=1),(v=o.get(g,d))===h?l++:(l>=5&&(f+=l-5+3),h=v,l=1)}u>=5&&(f+=u-5+3),l>=5&&(f+=l-5+3)}return f},e.getPenaltyN2=function(o){for(var a=o.size,f=0,u=0;u<a-1;u++)for(var l=0;l<a-1;l++){var s=o.get(u,l)+o.get(u,l+1)+o.get(u+1,l)+o.get(u+1,l+1);(4===s||0===s)&&f++}return 3*f},e.getPenaltyN3=function(o){for(var a=o.size,f=0,u=0,l=0,s=0;s<a;s++){u=l=0;for(var h=0;h<a;h++)u=u<<1&2047|o.get(s,h),h>=10&&(1488===u||93===u)&&f++,l=l<<1&2047|o.get(h,s),h>=10&&(1488===l||93===l)&&f++}return 40*f},e.getPenaltyN4=function(o){for(var a=0,f=o.data.length,u=0;u<f;u++)a+=o.data[u];return 10*Math.abs(Math.ceil(100*a/f/5)-10)},e.applyMask=function(o,a){for(var f=a.size,u=0;u<f;u++)for(var l=0;l<f;l++)a.isReserved(l,u)||a.xor(l,u,i(o,l,u))},e.getBestMask=function(o,a){for(var f=Object.keys(e.Patterns).length,u=0,l=1/0,s=0;s<f;s++){a(s),e.applyMask(s,o);var h=e.getPenaltyN1(o)+e.getPenaltyN2(o)+e.getPenaltyN3(o)+e.getPenaltyN4(o);e.applyMask(s,o),h<l&&(l=h,u=s)}return u}}),Q=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Z=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430],q_getTotalCodewordsCount=function(e,t){switch(t){case B.L:return Z[4*(e-1)+0];case B.M:return Z[4*(e-1)+1];case B.Q:return Z[4*(e-1)+2];case B.H:return Z[4*(e-1)+3];default:return}},W=A_alloc(512),X=A_alloc(256);!function(){for(var e=1,t=0;t<255;t++)W[t]=e,X[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)W[t]=W[t-255]}();var ae_exp=function(e){return W[e]},ae_mul=function(e,t){return 0===e||0===t?0:W[X[e]+X[t]]},Ae=I(function(n,e){e.mul=function(i,r){for(var o=A_alloc(i.length+r.length-1),a=0;a<i.length;a++)for(var f=0;f<r.length;f++)o[a+f]^=ae_mul(i[a],r[f]);return o},e.mod=function(i,r){for(var o=A_from(i);o.length-r.length>=0;){for(var a=o[0],f=0;f<r.length;f++)o[f]^=ae_mul(r[f],a);for(var u=0;u<o.length&&0===o[u];)u++;o=o.slice(u)}return o},e.generateECPolynomial=function(i){for(var r=A_from([1]),o=0;o<i;o++)r=e.mul(r,[1,ae_exp(o)]);return r}}),yt=ke.lW;function ue(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}ue.prototype.initialize=function(e){this.degree=e,this.genPoly=Ae.generateECPolynomial(this.degree)},ue.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=A_alloc(this.degree),i=yt.concat([e,t],e.length+this.degree),r=Ae.mod(i,this.genPoly),o=this.degree-r.length;if(o>0){var a=A_alloc(this.degree);return r.copy(a,o),a}return r};var Et=ue,$_isValid=function(e){return!isNaN(e)&&e>=1&&e<=40},V="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",_t="(?:(?![A-Z0-9 $%*+\\-./:]|"+(V=V.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+",Ct=new RegExp(V,"g"),Bt=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),At=new RegExp(_t,"g"),Pt=new RegExp("[0-9]+","g"),bt=new RegExp("[A-Z $%*+\\-./:]+","g"),Rt=new RegExp("^"+V+"$"),It=new RegExp("^[0-9]+$"),Mt=new RegExp("^[A-Z0-9 $%*+\\-./:]+$"),F={KANJI:Ct,BYTE_KANJI:Bt,BYTE:At,NUMERIC:Pt,ALPHANUMERIC:bt,testKanji:function(e){return Rt.test(e)},testNumeric:function(e){return It.test(e)},testAlphanumeric:function(e){return Mt.test(e)}},c=I(function(n,e){e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(r,o){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!$_isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?r.ccBits[0]:o<27?r.ccBits[1]:r.ccBits[2]},e.getBestModeForData=function(r){return F.testNumeric(r)?e.NUMERIC:F.testAlphanumeric(r)?e.ALPHANUMERIC:F.testKanji(r)?e.KANJI:e.BYTE},e.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},e.isValid=function(r){return r&&r.bit&&r.ccBits},e.from=function(r,o){if(e.isValid(r))return r;try{return function(i){if("string"!=typeof i)throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}(r)}catch(a){return o}}}),j=I(function(n,e){var i=E_getBCHDigit(7973);function o(u,l){return c.getCharCountIndicator(u,l)+4}function a(u,l){var s=0;return u.forEach(function(h){var d=o(h.mode,l);s+=d+h.getBitsLength()}),s}e.from=function(l,s){return $_isValid(l)?parseInt(l,10):s},e.getCapacity=function(l,s,h){if(!$_isValid(l))throw new Error("Invalid QR Code version");void 0===h&&(h=c.BYTE);var v=8*(E_getSymbolTotalCodewords(l)-q_getTotalCodewordsCount(l,s));if(h===c.MIXED)return v;var m=v-o(h,l);switch(h){case c.NUMERIC:return Math.floor(m/10*3);case c.ALPHANUMERIC:return Math.floor(m/11*2);case c.KANJI:return Math.floor(m/13);case c.BYTE:default:return Math.floor(m/8)}},e.getBestVersionForData=function(l,s){var h,d=B.from(s,B.M);if(te(l)){if(l.length>1)return function(u,l){for(var s=1;s<=40;s++)if(a(u,s)<=e.getCapacity(s,l,c.MIXED))return s}(l,d);if(0===l.length)return 1;h=l[0]}else h=l;return function(u,l,s){for(var h=1;h<=40;h++)if(l<=e.getCapacity(h,s,u))return h}(h.mode,h.getLength(),d)},e.getEncodedBits=function(l){if(!$_isValid(l)||l<7)throw new Error("Invalid QR Code version");for(var s=l<<12;E_getBCHDigit(s)-i>=0;)s^=7973<<E_getBCHDigit(s)-i;return l<<12|s}}),Re=E_getBCHDigit(1335);function x(n){this.mode=c.NUMERIC,this.data=n.toString()}x.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},x.prototype.getLength=function(){return this.data.length},x.prototype.getBitsLength=function(){return x.getBitsLength(this.data.length)},x.prototype.write=function(e){var t,i,r;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),r=parseInt(i,10),e.put(r,10);var o=this.data.length-t;o>0&&(i=this.data.substr(t),r=parseInt(i,10),e.put(r,3*o+1))};var Ie=x,fe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function K(n){this.mode=c.ALPHANUMERIC,this.data=n}K.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},K.prototype.getLength=function(){return this.data.length},K.prototype.getBitsLength=function(){return K.getBitsLength(this.data.length)},K.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var i=45*fe.indexOf(this.data[t]);i+=fe.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(fe.indexOf(this.data[t]),6)};var Me=K;function Y(n){this.mode=c.BYTE,this.data=A_from(n)}Y.getBitsLength=function(e){return 8*e},Y.prototype.getLength=function(){return this.data.length},Y.prototype.getBitsLength=function(){return Y.getBitsLength(this.data.length)},Y.prototype.write=function(n){for(var e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var Se=Y;function z(n){this.mode=c.KANJI,this.data=n}z.getBitsLength=function(e){return 13*e},z.prototype.getLength=function(){return this.data.length},z.prototype.getBitsLength=function(){return z.getBitsLength(this.data.length)},z.prototype.write=function(n){var e;for(e=0;e<this.data.length;e++){var t=E_toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else{if(!(t>=57408&&t<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");t-=49472}n.put(t=192*(t>>>8&255)+(255&t),13)}};var Le=z,Ot=I(function(n){var e={single_source_shortest_paths:function(t,i,r){var o={},a={};a[i]=0;var u,l,s,h,d,v,f=e.PriorityQueue.make();for(f.push(i,0);!f.empty();)for(s in h=(u=f.pop()).cost,d=t[l=u.value]||{})d.hasOwnProperty(s)&&(v=h+d[s],(void 0===a[s]||a[s]>v)&&(a[s]=v,f.push(s,v),o[s]=l));if(void 0!==r&&void 0===a[r]){var _=["Could not find a path from ",i," to ",r,"."].join("");throw new Error(_)}return o},extract_shortest_path_from_predecessor_list:function(t,i){for(var r=[],o=i;o;)r.push(o),o=t[o];return r.reverse(),r},find_path:function(t,i,r){var o=e.single_source_shortest_paths(t,i,r);return e.extract_shortest_path_from_predecessor_list(o,r)},PriorityQueue:{make:function(t){var o,i=e.PriorityQueue,r={};for(o in t=t||{},i)i.hasOwnProperty(o)&&(r[o]=i[o]);return r.queue=[],r.sorter=t.sorter||i.default_sorter,r},default_sorter:function(t,i){return t.cost-i.cost},push:function(t,i){this.queue.push({value:t,cost:i}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};n.exports=e}),se=I(function(n,e){function t(s){return unescape(encodeURIComponent(s)).length}function i(s,h,d){for(var v,g=[];null!==(v=s.exec(d));)g.push({data:v[0],index:v.index,mode:h,length:v[0].length});return g}function r(s){var g,v,h=i(F.NUMERIC,c.NUMERIC,s),d=i(F.ALPHANUMERIC,c.ALPHANUMERIC,s);return E_isKanjiModeEnabled()?(g=i(F.BYTE,c.BYTE,s),v=i(F.KANJI,c.KANJI,s)):(g=i(F.BYTE_KANJI,c.BYTE,s),v=[]),h.concat(d,g,v).sort(function(y,_){return y.index-_.index}).map(function(y){return{data:y.data,mode:y.mode,length:y.length}})}function o(s,h){switch(h){case c.NUMERIC:return Ie.getBitsLength(s);case c.ALPHANUMERIC:return Me.getBitsLength(s);case c.KANJI:return Le.getBitsLength(s);case c.BYTE:return Se.getBitsLength(s)}}function l(s,h){var d,g=c.getBestModeForData(s);if((d=c.from(h,g))!==c.BYTE&&d.bit<g.bit)throw new Error('"'+s+'" cannot be encoded with mode '+c.toString(d)+".\n Suggested mode is: "+c.toString(g));switch(d===c.KANJI&&!E_isKanjiModeEnabled()&&(d=c.BYTE),d){case c.NUMERIC:return new Ie(s);case c.ALPHANUMERIC:return new Me(s);case c.KANJI:return new Le(s);case c.BYTE:return new Se(s)}}e.fromArray=function(h){return h.reduce(function(d,g){return"string"==typeof g?d.push(l(g,null)):g.data&&d.push(l(g.data,g.mode)),d},[])},e.fromString=function(h,d){for(var m=function(s,h){for(var d={},g={start:{}},v=["start"],m=0;m<s.length;m++){for(var y=s[m],_=[],P=0;P<y.length;P++){var T=y[P],L=""+m+P;_.push(L),d[L]={node:T,lastCount:0},g[L]={};for(var R=0;R<v.length;R++){var b=v[R];d[b]&&d[b].node.mode===T.mode?(g[b][L]=o(d[b].lastCount+T.length,T.mode)-o(d[b].lastCount,T.mode),d[b].lastCount+=T.length):(d[b]&&(d[b].lastCount=T.length),g[b][L]=o(T.length,T.mode)+4+c.getCharCountIndicator(T.mode,h))}}v=_}for(R=0;R<v.length;R++)g[v[R]].end=0;return{map:g,table:d}}(function(s){for(var h=[],d=0;d<s.length;d++){var g=s[d];switch(g.mode){case c.NUMERIC:h.push([g,{data:g.data,mode:c.ALPHANUMERIC,length:g.length},{data:g.data,mode:c.BYTE,length:g.length}]);break;case c.ALPHANUMERIC:h.push([g,{data:g.data,mode:c.BYTE,length:g.length}]);break;case c.KANJI:h.push([g,{data:g.data,mode:c.BYTE,length:t(g.data)}]);break;case c.BYTE:h.push([{data:g.data,mode:c.BYTE,length:t(g.data)}])}}return h}(r(h,E_isKanjiModeEnabled())),d),y=Ot.find_path(m.map,"start","end"),_=[],P=1;P<y.length-1;P++)_.push(m.table[y[P]].node);return e.fromArray(_.reduce(function(h,d){var g=h.length-1>=0?h[h.length-1]:null;return g&&g.mode===d.mode?(h[h.length-1].data+=d.data,h):(h.push(d),h)},[]))},e.rawSplit=function(h){return e.fromArray(r(h,E_isKanjiModeEnabled()))}});function le(n,e,t){var o,a,i=n.size,r=function(e,t){for(var i=e.bit<<3|t,r=i<<10;E_getBCHDigit(r)-Re>=0;)r^=1335<<E_getBCHDigit(r)-Re;return 21522^(i<<10|r)}(e,t);for(o=0;o<15;o++)n.set(o<6?o:o<8?o+1:i-15+o,8,a=1==(r>>o&1),!0),n.set(8,o<8?i-o-1:o<9?15-o-1+1:15-o-1,a,!0);n.set(i-8,8,1,!0)}function Ht(n,e,t){var i=new ut;t.forEach(function(l){i.put(l.mode.bit,4),i.put(l.getLength(),c.getCharCountIndicator(l.mode,n)),l.write(i)});var a=8*(E_getSymbolTotalCodewords(n)-q_getTotalCodewordsCount(n,e));for(i.getLengthInBits()+4<=a&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);for(var f=(a-i.getLengthInBits())/8,u=0;u<f;u++)i.put(u%2?17:236,8);return function(n,e,t){for(var i=E_getSymbolTotalCodewords(e),o=i-q_getTotalCodewordsCount(e,t),a=function(e,t){switch(t){case B.L:return Q[4*(e-1)+0];case B.M:return Q[4*(e-1)+1];case B.Q:return Q[4*(e-1)+2];case B.H:return Q[4*(e-1)+3];default:return}}(e,t),u=a-i%a,l=Math.floor(i/a),s=Math.floor(o/a),h=s+1,d=l-s,g=new Et(d),v=0,m=new Array(a),y=new Array(a),_=0,P=A_from(n.buffer),T=0;T<a;T++){var L=T<u?s:h;m[T]=P.slice(v,v+L),y[T]=g.encode(m[T]),v+=L,_=Math.max(_,L)}var N,D,R=A_alloc(i),b=0;for(N=0;N<_;N++)for(D=0;D<a;D++)N<m[D].length&&(R[b++]=m[D][N]);for(N=0;N<d;N++)for(D=0;D<a;D++)R[b++]=y[D][N];return R}(i,n,e)}function Wt(n,e,t,i){var r;if(te(n))r=se.fromArray(n);else{if("string"!=typeof n)throw new Error("Invalid data");var o=e;if(!o){var a=se.rawSplit(n);o=j.getBestVersionForData(a,t)}r=se.fromString(n,o||40)}var f=j.getBestVersionForData(r,t);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<f)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+f+".\n")}else e=f;var u=Ht(e,t,r),l=E_getSymbolSize(e),s=new ft(l);return function(n,e){for(var t=n.size,i=function(e){var t=lt(e);return[[0,0],[t-7,0],[0,t-7]]}(e),r=0;r<i.length;r++)for(var o=i[r][0],a=i[r][1],f=-1;f<=7;f++)if(!(o+f<=-1||t<=o+f))for(var u=-1;u<=7;u++)a+u<=-1||t<=a+u||n.set(o+f,a+u,f>=0&&f<=6&&(0===u||6===u)||u>=0&&u<=6&&(0===f||6===f)||f>=2&&f<=4&&u>=2&&u<=4,!0)}(s,e),function(n){for(var e=n.size,t=8;t<e-8;t++){var i=t%2==0;n.set(t,6,i,!0),n.set(6,t,i,!0)}}(s),function(n,e){for(var t=st.getPositions(e),i=0;i<t.length;i++)for(var r=t[i][0],o=t[i][1],a=-2;a<=2;a++)for(var f=-2;f<=2;f++)n.set(r+a,o+f,-2===a||2===a||-2===f||2===f||0===a&&0===f,!0)}(s,e),le(s,t,0),e>=7&&function(n,e){for(var r,o,a,t=n.size,i=j.getEncodedBits(e),f=0;f<18;f++)r=Math.floor(f/3),n.set(r,o=f%3+t-8-3,a=1==(i>>f&1),!0),n.set(o,r,a,!0)}(s,e),function(n,e){for(var t=n.size,i=-1,r=t-1,o=7,a=0,f=t-1;f>0;f-=2)for(6===f&&f--;;){for(var u=0;u<2;u++)if(!n.isReserved(r,f-u)){var l=!1;a<e.length&&(l=1==(e[a]>>>o&1)),n.set(r,f-u,l),-1==--o&&(a++,o=7)}if((r+=i)<0||t<=r){r-=i,i=-i;break}}}(s,u),isNaN(i)&&(i=oe.getBestMask(s,le.bind(null,s,t))),oe.applyMask(i,s),le(s,t,i),{modules:s,version:e,errorCorrectionLevel:t,maskPattern:i,segments:r}}var he_create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var r,o,i=B.M;return void 0!==t&&(i=B.from(t.errorCorrectionLevel,B.M),r=j.from(t.version),o=oe.from(t.maskPattern),t.toSJISFunc&&function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');ie=e}(t.toSJISFunc)),Wt(e,r,i,o)},ee=I(function(n,e){function t(i){if("number"==typeof i&&(i=i.toString()),"string"!=typeof i)throw new Error("Color should be defined as hex string");var r=i.slice().replace("#","").split("");if(r.length<3||5===r.length||r.length>8)throw new Error("Invalid hex color: "+i);(3===r.length||4===r.length)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),6===r.length&&r.push("F","F");var o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:255&o,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});var a=r.width&&r.width>=21?r.width:void 0;return{width:a,scale:a?4:r.scale||4,margin:null==r.margin||r.margin<0?4:r.margin,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,o){return o.width&&o.width>=r+2*o.margin?o.width/(r+2*o.margin):o.scale},e.getImageWidth=function(r,o){var a=e.getScale(r,o);return Math.floor((r+2*o.margin)*a)},e.qrToImageData=function(r,o,a){for(var f=o.modules.size,u=o.modules.data,l=e.getScale(f,a),s=Math.floor((f+2*a.margin)*l),h=a.margin*l,d=[a.color.light,a.color.dark],g=0;g<s;g++)for(var v=0;v<s;v++){var m=4*(g*s+v),y=a.color.light;g>=h&&v>=h&&g<s-h&&v<s-h&&(y=d[u[Math.floor((g-h)/l)*f+Math.floor((v-h)/l)]?1:0]),r[m++]=y.r,r[m++]=y.g,r[m++]=y.b,r[m]=y.a}}}),Ne=I(function(n,e){e.render=function(o,a,f){var u=f,l=a;void 0===u&&(!a||!a.getContext)&&(u=a,a=void 0),a||(l=function(){try{return document.createElement("canvas")}catch(r){throw new Error("You need to specify a canvas element")}}()),u=ee.getOptions(u);var s=ee.getImageWidth(o.modules.size,u),h=l.getContext("2d"),d=h.createImageData(s,s);return ee.qrToImageData(d.data,o,u),function(r,o,a){r.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}(h,l,s),h.putImageData(d,0,0),l},e.renderToDataURL=function(o,a,f){var u=f;return void 0===u&&(!a||!a.getContext)&&(u=a,a=void 0),u||(u={}),e.render(o,a,u).toDataURL(u.type||"image/png",(u.rendererOpts||{}).quality)}});function De(n,e){var t=n.a/255,i=e+'="'+n.hex+'"';return t<1?i+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':i}function de(n,e,t){var i=n+e;return void 0!==t&&(i+=" "+t),i}function ge(n,e,t,i,r){var o=[].slice.call(arguments,1),a=o.length,f="function"==typeof o[a-1];if(!f&&!Ye())throw new Error("Callback required as last argument");if(!f){if(a<1)throw new Error("Too few arguments provided");return 1===a?(t=e,e=i=void 0):2===a&&!e.getContext&&(i=t,t=e,e=void 0),new Promise(function(l,s){try{var h=he_create(t,i);l(n(h,e,i))}catch(d){s(d)}})}if(a<2)throw new Error("Too few arguments provided");2===a?(r=t,t=e,e=i=void 0):3===a&&(e.getContext&&void 0===r?(r=i,i=void 0):(r=i,i=t,t=e,e=void 0));try{var u=he_create(t,i);r(null,n(u,e,i))}catch(l){r(l)}}var er={create:he_create,toCanvas:ge.bind(null,Ne.render),toDataURL:ge.bind(null,Ne.renderToDataURL),toString:ge.bind(null,function(n,e,t){return function(e,t,i){var r=ee.getOptions(t),o=e.modules.size,a=e.modules.data,f=o+2*r.margin,u=r.color.light.a?"<path "+De(r.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",l="<path "+De(r.color.dark,"stroke")+' d="'+function(n,e,t){for(var i="",r=0,o=!1,a=0,f=0;f<n.length;f++){var u=Math.floor(f%e),l=Math.floor(f/e);!u&&!o&&(o=!0),n[f]?(a++,f>0&&u>0&&n[f-1]||(i+=o?de("M",u+t,.5+l+t):de("m",r,0),r=0,o=!1),u+1<e&&n[f+1]||(i+=de("h",a),a=0)):r++}return i}(a,o,r.margin)+'"/>',d='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+'viewBox="0 0 '+f+" "+f+'" shape-rendering="crispEdges">'+u+l+"</svg>\n";return"function"==typeof i&&i(null,d),d}(n,t)})};const O=new Fe.k("TOTP"),Ue=class{constructor(n){(0,w.r)(this,n),this.inputProps={autoFocus:!0},this.handleAuthStateChange=G.d,this.headerText=S.T.TOTP_HEADER_TEXT,this.issuer=S.T.TOTP_ISSUER,this.handleComplete=this.onTOTPEvent,this.standalone=!1,this.code=null,this.setupMessage=null,this.qrCodeInput=null,this.loading=!1}componentWillLoad(){var n=this;return(0,H.Z)(function*(){n.standalone||(n.removeHubListener=(0,G.o)(e=>{e===ve.A.TOTPSetup&&n.setup()})),yield n.setup()})()}handleUserChange(){this.standalone&&this.setup()}disconnectedCallback(){this.removeHubListener&&this.removeHubListener()}buildOtpAuthPath(n,e,t){return`otpauth://totp/${e}:${n.username}?secret=${t}&issuer=${e}`}onTOTPEvent(n){var e=this;return(0,H.Z)(function*(){O.debug("on totp event"),yield(0,Oe.c)(n,e.handleAuthStateChange)})()}handleTotpInputChange(n){this.setupMessage=null,this.qrCodeInput=n.target.value}generateQRCode(n){var e=this;return(0,H.Z)(function*(){try{e.qrCodeImageSource=yield er.toDataURL(n)}catch(t){(0,G.a)(t)}})()}setup(){var n=this;return(0,H.Z)(function*(){if(n.code||n.loading)return void O.debug("setup was attempted while another is in progress, skipping setup.");if(!n.user||!n.user.associateSoftwareToken)return void O.debug("setup was attempted with invalid `user`, skipping setup.",n.user);if(!U.g||"function"!=typeof U.g.setupTOTP)throw new Error(pe.N);n.setupMessage=null;const e=encodeURI(M.o.get(n.issuer));n.loading=!0;try{const t=yield U.g.setupTOTP(n.user);O.debug("secret key",t),n.code=n.buildOtpAuthPath(n.user,e,t),n.generateQRCode(n.code)}catch(t){(0,G.a)(t),O.debug(M.o.get(S.T.TOTP_SETUP_FAILURE),t)}finally{n.loading=!1}})()}verifyTotpToken(n){var e=this;return(0,H.Z)(function*(){if(n&&n.preventDefault(),!e.qrCodeInput)return void O.debug("No TOTP Code provided");const t=e.user;if(!U.g||"function"!=typeof U.g.verifyTotpToken||"function"!=typeof U.g.setPreferredMFA)throw new Error(pe.N);try{yield U.g.verifyTotpToken(t,e.qrCodeInput),yield U.g.setPreferredMFA(t,ve.M.TOTP),e.setupMessage=M.o.get(S.T.TOTP_SUCCESS_MESSAGE),O.debug(M.o.get(S.T.TOTP_SUCCESS_MESSAGE)),yield e.handleComplete(t)}catch(i){e.setupMessage=M.o.get(S.T.TOTP_SETUP_FAILURE),O.error(i)}})()}render(){return(0,w.h)(w.H,null,(0,w.h)("amplify-form-section",{headerText:M.o.get(this.headerText),submitButtonText:M.o.get(S.T.TOTP_SUBMIT_BUTTON_TEXT),handleSubmit:n=>this.verifyTotpToken(n),loading:this.loading},(0,w.h)("div",{class:"totp-setup"},this.qrCodeImageSource&&(0,w.h)("img",{src:this.qrCodeImageSource,alt:M.o.get(S.T.QR_CODE_ALT)}),(0,w.h)("amplify-form-field",{label:M.o.get(S.T.TOTP_LABEL),inputProps:this.inputProps,fieldId:"totpCode",name:"totpCode",handleInputChange:n=>this.handleTotpInputChange(n)}))))}static get watchers(){return{user:["handleUserChange"]}}};Ue.style=".totp-setup{text-align:center;margin-bottom:30px}.totp-setup img{height:128px;width:128px}"}}]);